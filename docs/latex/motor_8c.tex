\doxysection{Core/\+Src/motor.c File Reference}
\hypertarget{motor_8c}{}\label{motor_8c}\index{Core/Src/motor.c@{Core/Src/motor.c}}


Implementation of bidirectional PWM motor driver functions.  


{\ttfamily \#include "{}motor.\+h"{}}\newline
{\ttfamily \#include "{}main.\+h"{}}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{motor_8c_a391fa1e490bd712720989b58fa0d9904}{PWM\+\_\+\+MAX}}~2399
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{motor_8c_a82dc9f4f84ff8c46b0b97cd51a9469c1}{set\+\_\+duty}} (\mbox{\hyperlink{structmotor__t}{motor\+\_\+t}} \texorpdfstring{$\ast$}{*}motor, int32\+\_\+t duty)
\begin{DoxyCompactList}\small\item\em Set the motor\textquotesingle{}s PWM output based on signed duty cycle. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor_8c_a2c3f02a54893461ce371dfe296b020f7}{move\+\_\+to}} (\mbox{\hyperlink{structmotor__t}{motor\+\_\+t}} \texorpdfstring{$\ast$}{*}p\+\_\+mot, int32\+\_\+t target, int32\+\_\+t actual)
\begin{DoxyCompactList}\small\item\em Move the motor toward a target using proportional control. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor_8c_a5f5eeae83ea21ae12701b0c0b78e691f}{disable}} (\mbox{\hyperlink{structmotor__t}{motor\+\_\+t}} \texorpdfstring{$\ast$}{*}p\+\_\+mot)
\begin{DoxyCompactList}\small\item\em Disable PWM output (stop both channels) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{motor_8c_a87e0de30f5044f896afc5ddaeff0f632}{enable}} (\mbox{\hyperlink{structmotor__t}{motor\+\_\+t}} \texorpdfstring{$\ast$}{*}p\+\_\+mot)
\begin{DoxyCompactList}\small\item\em Enable both channels to full PWM output. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implementation of bidirectional PWM motor driver functions. 

Provides PWM control for motors using two timer channels (forward and reverse). Includes proportional control logic to move toward target angles for turret motors. 

\label{doc-define-members}
\Hypertarget{motor_8c_doc-define-members}
\doxysubsection{Macro Definition Documentation}
\Hypertarget{motor_8c_a391fa1e490bd712720989b58fa0d9904}\index{motor.c@{motor.c}!PWM\_MAX@{PWM\_MAX}}
\index{PWM\_MAX@{PWM\_MAX}!motor.c@{motor.c}}
\doxysubsubsection{\texorpdfstring{PWM\_MAX}{PWM\_MAX}}
{\footnotesize\ttfamily \label{motor_8c_a391fa1e490bd712720989b58fa0d9904} 
\#define PWM\+\_\+\+MAX~2399}



\label{doc-func-members}
\Hypertarget{motor_8c_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{motor_8c_a5f5eeae83ea21ae12701b0c0b78e691f}\index{motor.c@{motor.c}!disable@{disable}}
\index{disable@{disable}!motor.c@{motor.c}}
\doxysubsubsection{\texorpdfstring{disable()}{disable()}}
{\footnotesize\ttfamily \label{motor_8c_a5f5eeae83ea21ae12701b0c0b78e691f} 
void disable (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__t}{motor\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{p\+\_\+mot}{}\end{DoxyParamCaption})}



Disable PWM output (stop both channels) 

Disable motor output (coast both sides) \Hypertarget{motor_8c_a87e0de30f5044f896afc5ddaeff0f632}\index{motor.c@{motor.c}!enable@{enable}}
\index{enable@{enable}!motor.c@{motor.c}}
\doxysubsubsection{\texorpdfstring{enable()}{enable()}}
{\footnotesize\ttfamily \label{motor_8c_a87e0de30f5044f896afc5ddaeff0f632} 
void enable (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__t}{motor\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{p\+\_\+mot}{}\end{DoxyParamCaption})}



Enable both channels to full PWM output. 

Enable motor output with full PWM to both channels. \Hypertarget{motor_8c_a2c3f02a54893461ce371dfe296b020f7}\index{motor.c@{motor.c}!move\_to@{move\_to}}
\index{move\_to@{move\_to}!motor.c@{motor.c}}
\doxysubsubsection{\texorpdfstring{move\_to()}{move\_to()}}
{\footnotesize\ttfamily \label{motor_8c_a2c3f02a54893461ce371dfe296b020f7} 
void move\+\_\+to (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__t}{motor\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{p\+\_\+mot}{, }\item[{int32\+\_\+t}]{target}{, }\item[{int32\+\_\+t}]{actual}{}\end{DoxyParamCaption})}



Move the motor toward a target using proportional control. 

Move motor toward target position using proportional control.

Uses a simple P-\/controller with anti-\/windup and deadband handling. \Hypertarget{motor_8c_a82dc9f4f84ff8c46b0b97cd51a9469c1}\index{motor.c@{motor.c}!set\_duty@{set\_duty}}
\index{set\_duty@{set\_duty}!motor.c@{motor.c}}
\doxysubsubsection{\texorpdfstring{set\_duty()}{set\_duty()}}
{\footnotesize\ttfamily \label{motor_8c_a82dc9f4f84ff8c46b0b97cd51a9469c1} 
void set\+\_\+duty (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmotor__t}{motor\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{motor}{, }\item[{int32\+\_\+t}]{duty}{}\end{DoxyParamCaption})}



Set the motor\textquotesingle{}s PWM output based on signed duty cycle. 

Set motor duty cycle and direction.

Adjusts direction and magnitude using complementary PWM logic. For turret1, logic is inverted to account for wiring or mechanical setup. 