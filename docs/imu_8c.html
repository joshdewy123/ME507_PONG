<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME_507_Ping_Pong_Ball_Launcher: Core/Src/imu.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME_507_Ping_Pong_Ball_Launcher<span id="projectnumber">&#160;MECHA_02</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('imu_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">imu.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Source file for BNO055 IMU functions (I2C interface)  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="imu_8h_source.html">imu.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="main_8h_source.html">main.h</a>&quot;</code><br />
<code>#include &quot;stdio.h&quot;</code><br />
<code>#include &quot;string.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8a7c9b3e0194fcbea9de99da817ca365" id="r_a8a7c9b3e0194fcbea9de99da817ca365"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a7c9b3e0194fcbea9de99da817ca365">BNO055_Init</a> (<a class="el" href="struct_i2_c___handle_type_def.html">I2C_HandleTypeDef</a> *hi2c)</td></tr>
<tr class="memdesc:a8a7c9b3e0194fcbea9de99da817ca365"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the BNO055 IMU in NDOF mode.  <br /></td></tr>
<tr class="memitem:ad7ecd78362510ecfbff802bed85d1017" id="r_ad7ecd78362510ecfbff802bed85d1017"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad7ecd78362510ecfbff802bed85d1017">BNO055_StartCalibration</a> (void)</td></tr>
<tr class="memdesc:ad7ecd78362510ecfbff802bed85d1017"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends serial instructions to the user to calibrate the IMU.  <br /></td></tr>
<tr class="memitem:a3e577ee53e412b88193c60606ca3e260" id="r_a3e577ee53e412b88193c60606ca3e260"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e577ee53e412b88193c60606ca3e260">BNO055_ReadCalibStatus</a> (void)</td></tr>
<tr class="memdesc:a3e577ee53e412b88193c60606ca3e260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads and prints the current IMU calibration status over UART.  <br /></td></tr>
<tr class="memitem:a86d0adcbede0135de88c1fd7c6ec840c" id="r_a86d0adcbede0135de88c1fd7c6ec840c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a86d0adcbede0135de88c1fd7c6ec840c">BNO055_GetCalibStatus</a> (uint8_t *sys, uint8_t *gyr, uint8_t *acc, uint8_t *mag)</td></tr>
<tr class="memdesc:a86d0adcbede0135de88c1fd7c6ec840c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the current calibration status into provided pointers.  <br /></td></tr>
<tr class="memitem:afc4a25528329c383a5d29e1a3cbba73f" id="r_afc4a25528329c383a5d29e1a3cbba73f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afc4a25528329c383a5d29e1a3cbba73f">BNO055_Debug_ReadGyro</a> (void)</td></tr>
<tr class="memdesc:afc4a25528329c383a5d29e1a3cbba73f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug function that reads and prints raw gyroscope data over UART.  <br /></td></tr>
<tr class="memitem:a7300824def8ed00f98e42b7da2cdb20f" id="r_a7300824def8ed00f98e42b7da2cdb20f"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7300824def8ed00f98e42b7da2cdb20f">BNO055_ReadHeading</a> (void)</td></tr>
<tr class="memdesc:a7300824def8ed00f98e42b7da2cdb20f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the yaw heading angle from the IMU.  <br /></td></tr>
<tr class="memitem:a577c08c3b3e87816cd67c06e43bcd5e0" id="r_a577c08c3b3e87816cd67c06e43bcd5e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a577c08c3b3e87816cd67c06e43bcd5e0">BNO055_ReadEuler</a> (float *heading, float *roll, float *pitch)</td></tr>
<tr class="memdesc:a577c08c3b3e87816cd67c06e43bcd5e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads Euler angles (heading, roll, pitch) from the IMU.  <br /></td></tr>
<tr class="memitem:a15bcaa5c1fe1118eff460b9ea9ed8c67" id="r_a15bcaa5c1fe1118eff460b9ea9ed8c67"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15bcaa5c1fe1118eff460b9ea9ed8c67">BNO055_SaveCalibrationOffsets</a> (void)</td></tr>
<tr class="memdesc:a15bcaa5c1fe1118eff460b9ea9ed8c67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug function to print 22-byte calibration offset register.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Source file for BNO055 IMU functions (I2C interface) </p>
<p>Implements configuration and data reading functions for BNO055 sensor. Output includes heading angle and full Euler orientation. The IMU was tested and confirmed functional but not yet integrated into control FSM. </p>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="afc4a25528329c383a5d29e1a3cbba73f" name="afc4a25528329c383a5d29e1a3cbba73f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc4a25528329c383a5d29e1a3cbba73f">&#9670;&#160;</a></span>BNO055_Debug_ReadGyro()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BNO055_Debug_ReadGyro </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Debug function that reads and prints raw gyroscope data over UART. </p>

</div>
</div>
<a id="a86d0adcbede0135de88c1fd7c6ec840c" name="a86d0adcbede0135de88c1fd7c6ec840c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86d0adcbede0135de88c1fd7c6ec840c">&#9670;&#160;</a></span>BNO055_GetCalibStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BNO055_GetCalibStatus </td>
          <td>(</td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>sys</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>gyr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>acc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>mag</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the current calibration status into provided pointers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sys</td><td>Pointer to store system calibration level </td></tr>
    <tr><td class="paramname">gyr</td><td>Pointer to store gyroscope calibration level </td></tr>
    <tr><td class="paramname">acc</td><td>Pointer to store accelerometer calibration level </td></tr>
    <tr><td class="paramname">mag</td><td>Pointer to store magnetometer calibration level </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8a7c9b3e0194fcbea9de99da817ca365" name="a8a7c9b3e0194fcbea9de99da817ca365"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a7c9b3e0194fcbea9de99da817ca365">&#9670;&#160;</a></span>BNO055_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BNO055_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i2_c___handle_type_def.html">I2C_HandleTypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>hi2c</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the BNO055 IMU in NDOF mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to I2C handle </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3e577ee53e412b88193c60606ca3e260" name="a3e577ee53e412b88193c60606ca3e260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e577ee53e412b88193c60606ca3e260">&#9670;&#160;</a></span>BNO055_ReadCalibStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BNO055_ReadCalibStatus </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads and prints the current IMU calibration status over UART. </p>
<p>SYS/GYR/ACC/MAG status values are printed via UART for debug purposes. </p>

</div>
</div>
<a id="a577c08c3b3e87816cd67c06e43bcd5e0" name="a577c08c3b3e87816cd67c06e43bcd5e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a577c08c3b3e87816cd67c06e43bcd5e0">&#9670;&#160;</a></span>BNO055_ReadEuler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BNO055_ReadEuler </td>
          <td>(</td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>heading</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>roll</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>pitch</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads Euler angles (heading, roll, pitch) from the IMU. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">heading</td><td>Pointer to store heading angle (deg) </td></tr>
    <tr><td class="paramname">roll</td><td>Pointer to store roll angle (deg) </td></tr>
    <tr><td class="paramname">pitch</td><td>Pointer to store pitch angle (deg) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7300824def8ed00f98e42b7da2cdb20f" name="a7300824def8ed00f98e42b7da2cdb20f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7300824def8ed00f98e42b7da2cdb20f">&#9670;&#160;</a></span>BNO055_ReadHeading()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float BNO055_ReadHeading </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the yaw heading angle from the IMU. </p>
<dl class="section return"><dt>Returns</dt><dd>Heading in degrees (0–360°), or -1 on error </dd></dl>

</div>
</div>
<a id="a15bcaa5c1fe1118eff460b9ea9ed8c67" name="a15bcaa5c1fe1118eff460b9ea9ed8c67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15bcaa5c1fe1118eff460b9ea9ed8c67">&#9670;&#160;</a></span>BNO055_SaveCalibrationOffsets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BNO055_SaveCalibrationOffsets </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Debug function to print 22-byte calibration offset register. </p>
<p>This can be used to save offsets for reinitialization later. </p>

</div>
</div>
<a id="ad7ecd78362510ecfbff802bed85d1017" name="ad7ecd78362510ecfbff802bed85d1017"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7ecd78362510ecfbff802bed85d1017">&#9670;&#160;</a></span>BNO055_StartCalibration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BNO055_StartCalibration </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends serial instructions to the user to calibrate the IMU. </p>
<p>This function prints out instructions via UART to help the user perform system, gyroscope, accelerometer, and magnetometer calibration. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_c6310732a22f63c0c2fc5595561e68f1.html">Core</a></li><li class="navelem"><a href="dir_b596f468b52957496e4f78b80e029268.html">Src</a></li><li class="navelem"><a href="imu_8c.html">imu.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
